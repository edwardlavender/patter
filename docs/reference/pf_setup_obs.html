<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PF: set up movement datasets — pf_setup_obs • patter</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="PF: set up movement datasets — pf_setup_obs"><meta property="og:description" content="This function builds a timeline of observations for particle filtering. The forward filter (pf_forward()) iterates over this timeline. At each time step, the algorithm proposes candidate locations for an individual, evaluates the likelihood of each observation (e.g., acoustic and/or archival data) in the timeline at the current time step and optionally (re)samples valid locations using a set of weights that incorporate the likelihood."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">patter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a-methodology.html">Methodology</a>
    </li>
    <li>
      <a href="../articles/b-workflow-outline.html">Workflow outline</a>
    </li>
    <li>
      <a href="../articles/c-workflow-example.html">Example workflow</a>
    </li>
    <li>
      <a href="../articles/d-demos.html">Demos</a>
    </li>
    <li>
      <a href="../articles/e-faqs.html">FAQs</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/edwardlavender/patter/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>PF: set up movement datasets</h1>
    <small class="dont-index">Source: <a href="https://github.com/edwardlavender/patter/blob/HEAD/R/pf_setup.R" class="external-link"><code>R/pf_setup.R</code></a></small>
    <div class="hidden name"><code>pf_setup_obs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function builds a timeline of observations for particle filtering. The forward filter (<code><a href="pf_forward.html">pf_forward()</a></code>) iterates over this timeline. At each time step, the algorithm proposes candidate locations for an individual, evaluates the likelihood of each observation (e.g., acoustic and/or archival data) in the timeline at the current time step and optionally (re)samples valid locations using a set of weights that incorporate the likelihood.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pf_setup_obs</span><span class="op">(</span></span>
<span>  <span class="va">.dlist</span>,</span>
<span>  .trim <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">.step</span>,</span>
<span>  .period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">.mobility</span>,</span>
<span>  .verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"patter.verbose"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>.dlist</dt>
<dd><p>A named <code>list</code> of data and parameters from <code><a href="pat_setup_data.html">pat_setup_data()</a></code>. This function requires:</p><ul><li><p>(optional) <code>.dlist$data$acoustics</code>, with the following columns: <code>timestamp</code> and <code>receiver_id</code>.</p></li>
<li><p>(optional) <code>.dlist$data$archival</code>, with the following columns: <code>timestamp</code> and <code>depth</code>.</p></li>
<li><p>(optional) If <code>.dlist$data$acoustics</code> is provided, <code>.dlist$algorithm$detection_overlaps</code> is required if there are receivers with overlapping detection containers;</p></li>
</ul><p>At least one dataset must be provided. Data should be given <strong>for a single individual</strong>. Other datasets are not currently integrated within this function but can be included afterwards (see Details).</p></dd>


<dt>.trim</dt>
<dd><p>If both acoustic and archival data are supplied, <code>.trim</code> is <code>logical</code> variable that defines whether or not to trim the time series to the time period for which they overlap.</p></dd>


<dt>.step</dt>
<dd><p>An character, passed to <code><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">lubridate::period()</a></code>, <code><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">lubridate::round_date()</a></code> and <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq()</a></code> that defines the duration between sequential time steps (e.g., <code>"2 mins"</code>).</p></dd>


<dt>.period</dt>
<dd><p>(optional) A length-two <code>POSIXct</code> vector that defines the start and end time for the timeline. If unprovided, this is defined internally according to inputted movement datasets and <code>.trim</code>:</p><ul><li><p>If only <code>acoustics = .dlist$data$acoustics</code> is provided, <code>.period</code> is taken as <code>range(acoustics$timestamp)</code>.</p></li>
<li><p>If only <code>archival = .dlist$data$archival</code> is provided, <code>.period</code> is taken as <code>range(archival$timestamp)</code>.</p></li>
<li><p>If both datasets are provided and <code>.trim = FALSE</code>, <code>.period</code> is defined as <code>range(c(acoustics$timestamp, archival$timestamp))</code>.</p></li>
<li><p>If both datasets are provided and <code>.trim = TRUE</code>, <code>.period</code> is defined as the range in timestamps for the overlapping region.</p></li>
</ul></dd>


<dt>.mobility</dt>
<dd><p>A constant that defines the maximum (Euclidean) distance the individual could move in <code>.step</code>. See the <a href="https://edwardlavender.github.io/flapper/reference/get_mvt_mobility.html" class="external-link"><code>flapper::get_mvt_mobility_*()</code></a> functions to estimate <code>.mobility</code> from acoustic and/or archival data.</p></dd>


<dt>.verbose</dt>
<dd><p>User output control (see <code><a href="patter-progress.html">patter-progress</a></code> for supported options).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The function returns a <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code> with the following columns:</p><ul><li><p><code>timestep</code>---an <code>integer</code> that defines the time step;</p></li>
<li><p><code>timestamp</code>---a regular sequences of <code>POSIXct</code> time stamps;</p></li>
</ul><p>If acoustic data is provided, the following column(s) are also included:</p><ul><li><p><code>array_id</code>---an <code>integer</code> vector that uniquely distinguishes each array design;</p></li>
<li><p><code>detection</code>---an <code>integer</code> that distinguishes the time steps at which detections were (1) or were not (0) recorded;</p></li>
<li><p><code>acoustics</code>---a <code>list</code> of one-row acoustic observation matrices. In <code><a href="pf_forward.html">pf_forward()</a></code>, this information is used to calculate the likelihood of acoustic observations at proposal locations (see <code><a href="pf_lik.html">pf_lik_ac()</a></code>).</p><ul><li><p>If <code>detection = 1</code>, the <code>matrix</code> contains one named column for each receiver that recorded a detection and each overlapping receiver. (It is not necessary to include all receivers in this <code>matrix</code>.) The entries 1 and 0 distinguish the receivers at which detections were recorded/not recorded. This information is used to calculate the likelihood of acoustic observations at time steps with detection(s).</p></li>
<li><p>If <code>detection = 0</code>, the <code>list</code> element is <code>NULL</code>. We do not need to store empty detection matrices because the likelihood of non detection at all operational receivers in a given array design is extracted from pre-computed layers (see <code><a href="acs_setup_detection_kernels.html">acs_setup_detection_kernels()</a></code>).</p></li>
</ul></li>
<li><p><code>container</code>---a <code>list</code> of acoustic container information. In <code><a href="pf_forward.html">pf_forward()</a></code>, this information is used to eliminate proposal locations that are too far away from the location(s) of the next detection(s) (see <code><a href="pf_lik.html">acs_filter_container()</a></code>). Each <code>list</code> contains:</p><ul><li><p><code>coord</code>---a two-column <code>matrix</code> of coordinates for the receiver(s) that recorded the next detection;</p></li>
<li><p><code>buffer</code>---a <code>numeric</code> vector of the (Euclidean) distance from each pair of receiver coordinates within which the individual must have been located at each time step. The distance depends on the time between detections, the individual's <code>.mobility</code> and the receiver-specific detection range;</p></li>
</ul></li>
</ul><p>If archival data is provided, the following column(s) are also included:</p><ul><li><p><code>depth</code>---a number that defines the individual's depth (m) at each time step;</p></li>
</ul><p>To calculate the likelihood of archival observations in <code><a href="pf_forward.html">pf_forward()</a></code> by the default <code><a href="pf_lik.html">pf_lik_dc()</a></code> routine, a depth envelope (controlled by <code>depth_deep_eps</code> and <code>depth_shallow_eps</code> columns) is also required (see <code><a href="pf_lik.html">pf_lik_dc()</a></code>).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function defines the timeline of observations over which <code><a href="pf_forward.html">pf_forward()</a></code> is implemented. The function implements the following routines:</p><ul><li><p>Acoustic progressing (if applicable):</p><ul><li><p>Acoustic time series are rounded to the nearest <code>.step</code>;</p></li>
<li><p>Duplicate detections (at the same receiver in the same time interval) are dropped;</p></li>
</ul></li>
<li><p>Archival processing (if applicable):</p><ul><li><p>Archival time series are rounded to the nearest <code>.step</code>;</p></li>
<li><p>Multiple records (in the same time interval) are not permitted (in this instance, you need to aggregate observations manually or reduce <code>.step</code>);</p></li>
</ul></li>
<li><p>Alignment (if applicable):</p><ul><li><p>Acoustic and archival time series are optionally trimmed to the time period for which they overlap;</p></li>
</ul></li>
<li><p>Time series:</p><ul><li><p>Acoustic and/or archival time series are mapped onto a regular time series;</p></li>
<li><p>Information required by <code><a href="pf_forward.html">pf_forward()</a></code> (and built-in likelihood functions) is added;</p></li>
</ul></li>
</ul><p>At the time of writing, this function only supports acoustic and archival data. However, ancillary observations can easily be included in <code><a href="pf_forward.html">pf_forward()</a></code> as extra columns in this <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>The forward filtering--backward sampling algorithm samples locations (particles) that represent the possible locations of an individual through time, accounting for all data and the individual's movement.</p><ul><li><p>To set up data, use <code><a href="pat_setup_data.html">pat_setup_data()</a></code>.</p></li>
<li><p><code><a href="pf_forward.html">pf_forward()</a></code> implements the forward filter:</p><ul><li><p>To set up an observations timeline, use <code>pf_setup_obs()</code>.</p></li>
<li><p>For proposal (movement) models, see <code><a href="pf_propose.html">pf_propose</a></code>.</p></li>
<li><p>For likelihood functions, to evaluate the likelihood of the data at proposal locations, see <code><a href="pf_lik.html">pf_lik</a></code>.</p></li>
<li><p>For sampling functions, to (re)sample plausible proposal locations, see <code><a href="pf_sample.html">pf_sample</a></code>.</p></li>
<li><p>For tuning parameters, see <code><a href="pf_opt.html">pf_opt</a></code>.</p></li>
</ul></li>
<li><p><code>pf_backward_*()</code> refines outputs from the forward filter:</p><ul><li><p><code>pf_backward_killer()</code> removes dead-ends;</p></li>
<li><p><code>pf_backward_sampler</code><code>_*()</code> implements the backward sampler;</p></li>
</ul></li>
<li><p>To reconstruct movement paths from particle samples, use <code>pf_path()</code>.</p></li>
<li><p>To map emergent patterns of space use, use <code><a href="pf_coord.html">pf_coord()</a></code> plus a <code>map_*()</code> function, such as <code><a href="map_pou.html">map_pou()</a></code>, <code><a href="map_dens.html">map_dens()</a></code> and/or <code><a href="map_hr.html">map_hr</a></code><code>_()</code>.</p></li>
<li><p>For additional utilities, see supporting <code>pf_*()</code> functions, such as <code><a href="pf_files.html">pf_files()</a></code>, <code><a href="pf_files.html">pf_files_size()</a></code>, <code><a href="pf_plot_history.html">pf_plot_history()</a></code>, <code>pf_diag_convergence()</code> and <code><a href="pf_diag.html">pf_diag_summary()</a></code>.</p></li>
</ul></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Edward Lavender</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#### Define example datasets</span></span></span>
<span class="r-in"><span><span class="co"># Define movement datasets for a single individual</span></span></span>
<span class="r-in"><span><span class="va">acc</span>  <span class="op">&lt;-</span> <span class="va">dat_acoustics</span><span class="op">[</span><span class="va">dat_acoustics</span><span class="op">$</span><span class="va">individual_id</span> <span class="op">==</span> <span class="fl">25</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">arc</span>  <span class="op">&lt;-</span> <span class="va">dat_archival</span><span class="op">[</span><span class="va">dat_archival</span><span class="op">$</span><span class="va">individual_id</span> <span class="op">==</span> <span class="fl">25</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># For example speed, focus on a subset of data</span></span></span>
<span class="r-in"><span><span class="va">acc</span> <span class="op">&lt;-</span> <span class="va">acc</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">timestamp</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2016-03-17"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">arc</span> <span class="op">&lt;-</span> <span class="va">arc</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">timestamp</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2016-03-17"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># Set up data list(see `?pat_setup_data()`)</span></span></span>
<span class="r-in"><span><span class="va">dlist</span>     <span class="op">&lt;-</span> <span class="fu"><a href="pat_setup_data.html">pat_setup_data</a></span><span class="op">(</span>.acoustics <span class="op">=</span> <span class="va">acc</span>,</span></span>
<span class="r-in"><span>                            .moorings <span class="op">=</span> <span class="va">dat_moorings</span>,</span></span>
<span class="r-in"><span>                            .archival <span class="op">=</span> <span class="va">arc</span>,</span></span>
<span class="r-in"><span>                            .bathy <span class="op">=</span> <span class="fu"><a href="datasets-mefs.html">dat_gebco</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            .lonlat <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The deployment period(s) of some receiver(s) (`35`, `36`, `37`, `38`, `39`, `40`, `41`, `43`, `44`, `45`, `46`, `47`, `48`, `49`, `50`, `51`, `52`, `53`, `54`, `55`, `56`, `57`) in `.moorings` are entirely outside the range of acoustic observations. Consider excluding these receivers for improved efficiency (e.g., in `acs_setup_detection_kernels()`, which pre-calculates the likelihood of non detection at all operational receivers _for each array design_.</span>
<span class="r-in"><span><span class="co"># Include detection overlaps</span></span></span>
<span class="r-in"><span><span class="va">dlist</span><span class="op">$</span><span class="va">algorithm</span><span class="op">$</span><span class="va">detection_overlaps</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="acs_setup_detection_overlaps.html">acs_setup_detection_overlaps</a></span><span class="op">(</span><span class="va">dlist</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (1): Implement the function for acoustic time series only</span></span></span>
<span class="r-in"><span><span class="va">dlist_acpf</span> <span class="op">&lt;-</span> <span class="va">dlist</span></span></span>
<span class="r-in"><span><span class="va">dlist_acpf</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">archival</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">pf_setup_obs</span><span class="op">(</span>.dlist <span class="op">=</span> <span class="va">dlist_acpf</span>,</span></span>
<span class="r-in"><span>                    .step <span class="op">=</span> <span class="st">"2 mins"</span>,</span></span>
<span class="r-in"><span>                    .mobility <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::pf_setup_obs()` called @ 2024-03-18 14:28:09... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Checking user inputs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Processing time series... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Defining observations timeline... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: detection IDs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: array IDs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: matrices... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: containers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Completing call... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::pf_setup_obs()` call ended @ 2024-03-18 14:28:09 (duration: ~0 sec(s)). </span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">obs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    timestep           timestamp mobility array_id detection acoustics container</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;int&gt;              &lt;POSc&gt;    &lt;num&gt;    &lt;int&gt;     &lt;int&gt;    &lt;list&gt;    &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        1 2016-03-17 01:50:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        2 2016-03-17 01:52:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        3 2016-03-17 01:54:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        4 2016-03-17 01:56:00      500        1         0           &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:        5 2016-03-17 01:58:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:        6 2016-03-17 02:00:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (2): Use alternative parameters</span></span></span>
<span class="r-in"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">pf_setup_obs</span><span class="op">(</span>.dlist <span class="op">=</span> <span class="va">dlist_acpf</span>,</span></span>
<span class="r-in"><span>                    .step <span class="op">=</span> <span class="st">"2 mins"</span>,</span></span>
<span class="r-in"><span>                    .mobility <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::pf_setup_obs()` called @ 2024-03-18 14:28:09... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Checking user inputs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Processing time series... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Defining observations timeline... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: detection IDs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: array IDs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: matrices... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: containers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Completing call... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::pf_setup_obs()` call ended @ 2024-03-18 14:28:09 (duration: ~0 sec(s)). </span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">obs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    timestep           timestamp mobility array_id detection acoustics container</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;int&gt;              &lt;POSc&gt;    &lt;num&gt;    &lt;int&gt;     &lt;int&gt;    &lt;list&gt;    &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        1 2016-03-17 01:50:00     1000        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        2 2016-03-17 01:52:00     1000        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        3 2016-03-17 01:54:00     1000        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        4 2016-03-17 01:56:00     1000        1         0           &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:        5 2016-03-17 01:58:00     1000        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:        6 2016-03-17 02:00:00     1000        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (3): Implement the function for acoustic &amp; archival time series</span></span></span>
<span class="r-in"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">pf_setup_obs</span><span class="op">(</span>.dlist <span class="op">=</span> <span class="va">dlist</span>,</span></span>
<span class="r-in"><span>                    .step <span class="op">=</span> <span class="st">"2 mins"</span>,</span></span>
<span class="r-in"><span>                    .mobility <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::pf_setup_obs()` called @ 2024-03-18 14:28:09... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Checking user inputs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Processing time series... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Aligning time series... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Defining observations timeline... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: detection IDs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: array IDs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: matrices... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: containers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding archival observations... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Completing call... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::pf_setup_obs()` call ended @ 2024-03-18 14:28:09 (duration: ~0 sec(s)). </span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">obs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    timestep           timestamp mobility array_id detection acoustics container</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;int&gt;              &lt;POSc&gt;    &lt;num&gt;    &lt;int&gt;     &lt;int&gt;    &lt;list&gt;    &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        1 2016-03-17 01:50:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        2 2016-03-17 01:52:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        3 2016-03-17 01:54:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        4 2016-03-17 01:56:00      500        1         0           &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:        5 2016-03-17 01:58:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:        6 2016-03-17 02:00:00      500        1         1   1,0,0,0 &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    depth</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 73.78</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 73.32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 73.32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 73.32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: 73.55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: 68.70</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (4): Include full acoustic &amp; archival time series</span></span></span>
<span class="r-in"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">pf_setup_obs</span><span class="op">(</span>.dlist <span class="op">=</span> <span class="va">dlist</span>,</span></span>
<span class="r-in"><span>                    .trim <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                    .step <span class="op">=</span> <span class="st">"2 mins"</span>,</span></span>
<span class="r-in"><span>                    .mobility <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::pf_setup_obs()` called @ 2024-03-18 14:28:10... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Checking user inputs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Processing time series... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Defining observations timeline... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: detection IDs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: array IDs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: matrices... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding acoustic observations: containers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Adding archival observations... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Completing call... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::pf_setup_obs()` call ended @ 2024-03-18 14:28:10 (duration: ~0 sec(s)). </span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">obs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    timestep           timestamp mobility array_id detection acoustics container</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;int&gt;              &lt;POSc&gt;    &lt;num&gt;    &lt;int&gt;     &lt;int&gt;    &lt;list&gt;    &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        1 2016-03-17 00:00:00      500        1         0           &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        2 2016-03-17 00:02:00      500        1         0           &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        3 2016-03-17 00:04:00      500        1         0           &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        4 2016-03-17 00:06:00      500        1         0           &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:        5 2016-03-17 00:08:00      500        1         0           &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:        6 2016-03-17 00:10:00      500        1         0           &lt;list[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     depth</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 134.61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 135.77</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 135.53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 136.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: 135.07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: 134.38</span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">obs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    timestep           timestamp mobility array_id detection acoustics container</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;int&gt;              &lt;POSc&gt;    &lt;num&gt;    &lt;int&gt;     &lt;int&gt;    &lt;list&gt;    &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      715 2016-03-17 23:48:00      500        1         0                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      716 2016-03-17 23:50:00      500        1         0                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      717 2016-03-17 23:52:00      500        1         0                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      718 2016-03-17 23:54:00      500        1         0                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:      719 2016-03-17 23:56:00      500        1         0                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:      720 2016-03-17 23:58:00      500        1         0                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     depth</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 156.61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 156.61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 156.61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 156.61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: 156.84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: 156.61</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Edward Lavender.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

