<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Movement models — ModelMove • patter</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Movement models — ModelMove"><meta property="og:description" content="ModelMove is Abstract Type in Patter.jl that groups movement model sub-types, of which instances can be created via an R model_move_*() function."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">patter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a-methodology.html">Methodology</a>
    </li>
    <li>
      <a href="../articles/b-workflow-outline.html">Workflow outline</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/edwardlavender/patter/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Movement models</h1>
    <small class="dont-index">Source: <a href="https://github.com/edwardlavender/patter/blob/HEAD/R/models.R" class="external-link"><code>R/models.R</code></a></small>
    <div class="hidden name"><code>ModelMove.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>ModelMove</code> is Abstract Type in <a href="https://edwardlavender.github.io/Patter.jl" class="external-link"><code>Patter.jl</code></a> that groups movement model sub-types, of which instances can be created via an <code>R</code> <code>model_move_*()</code> function.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">model_move_xy</span><span class="op">(</span></span>
<span>  .mobility <span class="op">=</span> <span class="st">"750.0"</span>,</span>
<span>  .dbn_length <span class="op">=</span> <span class="st">"truncated(Gamma(1, 250.0), upper = 750.0)"</span>,</span>
<span>  .dbn_heading <span class="op">=</span> <span class="st">"Uniform(-pi, pi)"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">model_move_xyz</span><span class="op">(</span></span>
<span>  .mobility <span class="op">=</span> <span class="st">"750.0"</span>,</span>
<span>  .dbn_length <span class="op">=</span> <span class="st">"truncated(Gamma(1, 250.0), upper = 750.0)"</span>,</span>
<span>  .dbn_heading <span class="op">=</span> <span class="st">"Uniform(-pi, pi)"</span>,</span>
<span>  .dbn_z <span class="op">=</span> <span class="st">"truncated(Normal(100.0, 250.0), lower = 0.0, upper = 350.0)"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">model_move_cxy</span><span class="op">(</span></span>
<span>  .mobility <span class="op">=</span> <span class="st">"750.0"</span>,</span>
<span>  .dbn_length <span class="op">=</span> <span class="st">"truncated(Gamma(1.0, 750.0), upper = 750.0)"</span>,</span>
<span>  .dbn_heading_delta <span class="op">=</span> <span class="st">"Normal(0, 0.5)"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">model_move_cxyz</span><span class="op">(</span></span>
<span>  .mobility <span class="op">=</span> <span class="st">"750.0"</span>,</span>
<span>  .dbn_length <span class="op">=</span> <span class="st">"truncated(Gamma(1.0, 750.0), upper = 750.0)"</span>,</span>
<span>  .dbn_heading_delta <span class="op">=</span> <span class="st">"Normal(0, 0.5)"</span>,</span>
<span>  .dbn_z_delta <span class="op">=</span> <span class="st">"Normal(0, 3.5)"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg--mobility-dbn-length-dbn-heading-dbn-heading-delta-dbn-z-dbn-z-delta">.mobility, .dbn_length, .dbn_heading, .dbn_heading_delta, .dbn_z, .dbn_z_delta<a class="anchor" aria-label="anchor" href="#arg--mobility-dbn-length-dbn-heading-dbn-heading-delta-dbn-z-dbn-z-delta"></a></dt>
<dd><p><code>Character</code> strings that define movement model components:</p><ul><li><p><code>.mobility</code>—the maximum movement distance between two time steps (m);</p></li>
<li><p><code>.dbn_length</code>—the distribution of step lengths (m);</p></li>
<li><p><code>.dbn_heading</code>—the distribution of headings (rad);</p></li>
<li><p><code>.dbn_heading_delta</code>—the distribution of changes in heading, i.e., turning angle (rad);</p></li>
<li><p><code>.dbn_z</code>—the distribution of depths;</p></li>
<li><p><code>.dbn_z_delta</code>—the distribution of changes in depth;</p></li>
</ul></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>model_move_*()</code> functions return a <code>character</code> string that defines a <code>ModelMove</code> instance for evaluation in <code>Julia</code>. The <code><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></code> of the output is <code>character</code> plus <code>ModelMove</code> and <code>ModelMoveXY</code>, <code>ModelMoveXYZ</code>, <code>ModelMoveCXY</code> or <code>ModelMoveCXYZ</code> (see <code><a href="plot.ModelMove.html">plot.ModelMove</a></code>). If the map (<code>env</code>) does not exist in <code>Julia</code>, an error is thrown.</p>
    </div>
    <div id="model-structures">
    <h2>Model structures</h2>
    <p>Movement model sub-types are <code>Julia</code> structures that hold the components of movement models. From an <code>R</code>-user perspective, you can think of a <code>ModelMove</code> sub-type as an <code>S4</code>-<code><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></code>-like object, with slots for the components of a movement model. With a movement model instance, we can simulate movements and evaluate the density of movements from one state (location) to another.</p>
<p>The following movement models are built in to <a href="https://edwardlavender.github.io/Patter.jl" class="external-link"><code>Patter.jl</code></a>:</p><ul><li><p>Random walks (RWs):</p><ul><li><p><code>ModelMoveXY</code></p></li>
<li><p><code>ModelMoveXYZ</code></p></li>
</ul></li>
<li><p>Correlated random walks (CRWs):</p><ul><li><p><code>ModelMoveCXY</code></p></li>
<li><p><code>ModelMoveCXYZ</code></p></li>
</ul></li>
</ul><p>See <a href="https://edwardlavender.github.io/Patter.jl" class="external-link"><code>Patter.jl</code></a> or <code>JuliaCall::julia_help("ModelMove")</code> for the fields of the built-in sub-types. Briefly, all sub-types include:</p><ul><li><p>A <code>map</code> field, that defines the region(s) within which movements are permitted. In <code>R</code>, it is convenient to represent <code>map</code> as a <code>SpatRaster</code>, where <code>NAs</code> define inhospitable habitats (e.g., land). This should made available to <code>Julia</code> <code>ModelMove</code> constructors as <code>env</code> via <code><a href="set_map.html">set_map()</a></code>;</p></li>
<li><p>The <code>mobility</code> parameter;</p></li>
<li><p>Additional model-specific components (such as fields for the distribution of step lengths and headings in the case of two-dimensional random walks);</p></li>
</ul><p>In <code><a href="patter.html">patter</a></code>, movement models are required:</p><ul><li><p>To simulate movement paths, via <code><a href="sim_path_walk.html">sim_path_walk()</a></code>;</p></li>
<li><p>To run the particle filter, via <code><a href="pf_filter.html">pf_filter()</a></code>;</p></li>
<li><p>To run the particle smoother, via <code><a href="pf_smoother_two_filter.html">pf_smoother_two_filter()</a></code>;</p></li>
</ul><p>In <code>R</code> functions, the movement-model instance is specified via the <code>.model_move</code> argument. This argument expects a <code>character</code> string defining a <code>ModelMove</code> instance that can be evaluated in <code>Julia</code> (that is, a <code>ModelMove</code> constructor). <code>model_move_*()</code> functions are convenience functions for the specification of these constructors for the built-in sub-types. All <code>ModelMove</code> instances contain a <code>map</code> field that defines the region(s) within which movements are permitted. To use a <code>model_move_*()</code> function, the map should be available in <code>Julia</code> as <code>env</code> (see <code><a href="set_map.html">set_map()</a></code>). The additional components of the movement model are specified via <code>model_move_*()</code> function arguments as <code>character</code> strings of <code>Julia</code> code. Currently implemented <code>model_move_*()</code> functions are:</p><ul><li><p><code>model_move_xy()</code>, which specifies a RW in X and Y of sub-type <code>ModelMoveXY</code> in terms of the distributions of step lengths and headings;</p></li>
<li><p><code>model_move_xyz()</code>, which specifies a RW in X, Y and Z of sub-type <code>ModelMoveXY</code> in terms of the distributions of step lengths, headings and depths;</p></li>
<li><p><code>model_move_cxy()</code>, which specifies a CRW in X and Y of sub-type <code>ModelMoveXY</code> in terms of the distributions of step lengths and turning angles;</p></li>
<li><p><code>model_move_cxyz()</code>, which specifies a CRW in X, Y and Z of sub-type <code>ModelMoveCXYZ</code> in terms of the distributions of step lengths, turning angles and changes in depth;</p></li>
</ul><p>See <a href="https://discourse.julialang.org/t/a-comparison-of-common-distributions-in-julia-python-and-r/61604" class="external-link">here</a> for the translations of distributions in <code>R</code> (e.g., <code>*norm()</code>) into <code>Julia</code> (e.g., <code>Normal()</code>).</p>
<p>To plot the dimensions of a movement model, see <code><a href="plot.ModelMove.html">plot.ModelMove</a></code>. To visualise realisations of a model, see <code><a href="sim_path_walk.html">sim_path_walk()</a></code>.</p>
<p>In <code>Julia</code>, <code>ModelMove</code> instances are used to simulate states via <a href="https://edwardlavender.github.io/Patter.jl" class="external-link"><code>Patter.simulate_step()</code></a>. In the particle smoother, the density of movement from one state to another is evaluated by <a href="https://edwardlavender.github.io/Patter.jl" class="external-link"><code>Patter.logpdf_step()</code></a>. These are generic functions. Different methods are dispatched according to the input model. For the built-in <code>ModelMove</code> sub-types, corresponding methods for these routines are also built-in. For custom <code>ModelMove</code> sub-types, the methods need to be provided.</p>
<p>To use custom <code>ModelMove</code> sub-types, see <code><a href="State.html">?State</a></code>.</p>
    </div>
    <div id="model-development">
    <h2>Model development</h2>
    <p>For inference, we encourage users to start with simple movement models (such as random walks or correlated random walks) and add complexity iteratively, as required. Movement models should be formulated, and parameterised, using available datasets, domain knowledge and literature. For example:</p><ul><li><p>Lavender et al. (<a href="https://doi.org/10.1101/2025.02.13.638042" class="external-link">2025</a>). In a study of flapper skate (<em>Dipturus intermedius</em>) movements, we formulated a behavioural-switching correlated random walk movement model. We gauged potential swimming speeds from analyses of movement rates between receivers and vertical activity (via <a href="https://edwardlavender.github.io/flapper/reference/get_mvt_mobility.html" class="external-link"><code>get_mvt_mobility()</code></a> in <a href="https://github.com/edwardlavender/flapper" class="external-link"><code>flapper</code></a>). Actual movement speeds can be affected by current speeds and we evaluated these using an ocean model (via <a href="https://github.com/edwardlavender/fvcom.tbx" class="external-link"><code>fvcom.tbx</code></a>). We also reviewed information in the literature for related species (from accelerometery, satellite tracking, flow tank experiments and trawl footage). These studies helped to bound our expectations for movement rates in flapper skate, in the absence of direct measurements. Given epistemic uncertainty, we also conducted analyses with 'restrictive' and 'flexible' movement models to analyse algorithm sensitivity.</p></li>
<li><p>Lavender et al. (in prep). In a study on lake trout (<em>Salvelinus namaycush</em>), we are leveraging swim-speed information from fine-scale positioning studies, accelerometer measurements and swim-tunnel experiments (plus other datasets such as underwater video) to parameterise our models. For this species, we can visualise the distributions of speed and turning angle measurements (with histograms) and develop data-driven models (e.g., using <a href="https://cran.r-project.org/web/packages/fitdistrplus/vignettes/fitdistrplus_vignette.html" class="external-link"><code><a href="https://lbbe-software.github.io/fitdistrplus/reference/fitdist.html" class="external-link">fitdistrplus::fitdist()</a></code></a>).</p></li>
</ul><p>For the particle filter, movement models must be defined at the resolution of the <code>.timeline</code> (see <code><a href="pf_filter.html">pf_filter()</a></code>). For example, if you have a <code>.timeline</code> of two-minute time steps and a simple random walk, the distribution of step lengths (m) and headings (rad) should be defined for a two-minute time step (see <code>model_move_xy()</code>). All movements are truncated by the <code>.mobility</code> parameter. This is the maximum possible movement distance in the time between two time steps. Set <code>.mobility</code> based on the considerations above. Where necessary, you should also account for the discretisation errors in the timing of observations (e.g., see <code><a href="assemble.html">assemble_acoustics()</a></code>). Since <code>.mobility</code> affects the tail of the distribution, the exact value of <code>.mobility</code> can be relatively unimportant, <em>providing it is large enough</em>. We recommend erring on the side of flexibility in cases of uncertainty.</p>
<p>Note that model formulation and parameterisation can be an iterative process:</p><ul><li><p>Develop initial model and observation models, drawing on available datasets, domain knowledge and literature;</p></li>
<li><p>Perform inference, using <code><a href="pf_filter.html">pf_filter()</a></code>;</p></li>
<li><p>Evaluate convergence;</p></li>
<li><p>In cases of convergence failures, re-evaluate the model(s) and try again;</p></li>
<li><p>Where necessary, run the algorithms with more restrictive or flexible models to analyse sensitivity;</p></li>
</ul><p>For advice for your study system, please raise an issue on <a href="https://github.com/edwardlavender/patter/issues" class="external-link">GitHub</a>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>The routines in <code><a href="patter.html">patter</a></code> for the simulation of individual movements, observations and statistical modelling are built upon three Abstract Types defined in <code>Julia</code>:</p><ul><li><p>See <code><a href="State.html">State</a></code> for individual-state (location) structures;</p></li>
<li><p>See <code>ModelMove</code> for movement model structures;</p></li>
<li><p>See <code><a href="ModelObs.html">ModelObs</a></code> for observation model structures;</p></li>
</ul></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Edward Lavender</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="patter_run.html">patter_run</a></span><span class="op">(</span>.julia <span class="op">=</span> <span class="cn">TRUE</span>, .geospatial <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JuliaInterop/JuliaCall" class="external-link">JuliaCall</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Connect to Julia</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="julia_connect.html">julia_connect</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="set_seed.html">set_seed</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Define the `map`</span></span></span>
<span class="r-in"><span>  <span class="co"># `map` is the region within which movements are permitted</span></span></span>
<span class="r-in"><span>  <span class="co"># In `R`, we represent this as a `SpatRaster`</span></span></span>
<span class="r-in"><span>  <span class="co"># Here, we have a bathymetry `SpatRaster` for the west coast of Scotland:</span></span></span>
<span class="r-in"><span>  <span class="co"># * NaNs define regions into which movement is not permitted</span></span></span>
<span class="r-in"><span>  <span class="co"># * (i.e., on land, in the case of aquatic animals)</span></span></span>
<span class="r-in"><span>  <span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="datasets-mefs.html">dat_gebco</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Using `set_map()` makes the map available as a object called 'env' in `Julia`</span></span></span>
<span class="r-in"><span>  <span class="co"># &gt; This is required as a component of all movement models</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="set_map.html">set_map</a></span><span class="op">(</span><span class="va">map</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Example (1a): Use `model_move_xy()` with default options</span></span></span>
<span class="r-in"><span>  <span class="co"># `model_move_*()` functions simply return a character string of Julia code</span></span></span>
<span class="r-in"><span>  <span class="co"># (Downstream functions can evaluate this code, as shown below)</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_xy</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Example (1b): Customise `model_move_xy()`</span></span></span>
<span class="r-in"><span>  <span class="co"># Use a truncated normal distribution for step lengths:</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_xy</span><span class="op">(</span>.mobility <span class="op">=</span> <span class="st">"750.0"</span>,</span></span>
<span class="r-in"><span>                .dbn_length <span class="op">=</span> <span class="st">"truncated(Normal(250, 50), lower = 0.0, upper = 750.0)"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Use an exponential distribution for step lengths</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_xy</span><span class="op">(</span>.mobility <span class="op">=</span> <span class="st">"750.0"</span>,</span></span>
<span class="r-in"><span>                .dbn_length <span class="op">=</span> <span class="st">"truncated(Exponential(0.01), upper = 750.0)"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Use a biased random walk</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_xy</span><span class="op">(</span>.dbn_heading <span class="op">=</span> <span class="st">"VonMises(0, 1)"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Get help on a distribution in Julia:</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/JuliaCall/man/julia_help.html" class="external-link">julia_help</a></span><span class="op">(</span><span class="st">"Exponential"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Example (2): Use `model_move_xyz()`</span></span></span>
<span class="r-in"><span>  <span class="co"># Use default options</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_xyz</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Customise model components</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_xyz</span><span class="op">(</span>.mobility <span class="op">=</span> <span class="st">"750.0"</span>,</span></span>
<span class="r-in"><span>                 .dbn_length <span class="op">=</span> <span class="st">"truncated(Exponential(0.01), upper = 750.0)"</span>,</span></span>
<span class="r-in"><span>                 .dbn_z <span class="op">=</span> <span class="st">"truncated(Gamma(1.0, 250.0), lower = 0.0, upper = 350.0)"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Example (3): Use `model_move_cxy()`</span></span></span>
<span class="r-in"><span>  <span class="co"># Use default options</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_cxy</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Customise model components</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_cxy</span><span class="op">(</span>.mobility <span class="op">=</span> <span class="st">"750.0"</span>,</span></span>
<span class="r-in"><span>                 .dbn_length <span class="op">=</span> <span class="st">"truncated(Normal(250, 50), lower = 0.0, upper = 750.0)"</span>,</span></span>
<span class="r-in"><span>                 .dbn_heading_delta <span class="op">=</span> <span class="st">"Normal(0, 0.25)"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Example (4): Use `model_move_cxyz()`</span></span></span>
<span class="r-in"><span>  <span class="co"># Use default options</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_cxyz</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Customise model components</span></span></span>
<span class="r-in"><span>  <span class="fu">model_move_cxyz</span><span class="op">(</span>.mobility <span class="op">=</span> <span class="st">"750.0"</span>,</span></span>
<span class="r-in"><span>                  .dbn_length <span class="op">=</span> <span class="st">"truncated(Normal(250, 50), lower = 0.0, upper = 750.0)"</span>,</span></span>
<span class="r-in"><span>                  .dbn_heading_delta <span class="op">=</span> <span class="st">"Normal(0, 0.25)"</span>,</span></span>
<span class="r-in"><span>                  .dbn_z_delta <span class="op">=</span> <span class="st">"Normal(0, 2.5)"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Example (4): Visualise movement model component distributions</span></span></span>
<span class="r-in"><span>  <span class="co"># See `?plot.ModelMove`</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">model_move_xy</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Example (5): Visualise movement model realisations (trajectories)</span></span></span>
<span class="r-in"><span>  <span class="co"># See `?sim_path_walk`</span></span></span>
<span class="r-in"><span>  <span class="co"># Define a timeline for the simulation</span></span></span>
<span class="r-in"><span>  <span class="va">timeline</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2016-01-01"</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  length.out <span class="op">=</span> <span class="fl">1000L</span>, by <span class="op">=</span> <span class="st">"2 mins"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Define an initial location</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">708212.6</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">6251684</span></span></span>
<span class="r-in"><span>  <span class="va">origin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>map_value <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/extract.html" class="external-link">extract</a></span><span class="op">(</span><span class="va">map</span>, <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Collect essential arguments for `sim_path_walk()`</span></span></span>
<span class="r-in"><span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>.map <span class="op">=</span> <span class="va">map</span>,</span></span>
<span class="r-in"><span>               .xinit <span class="op">=</span> <span class="va">origin</span>,</span></span>
<span class="r-in"><span>               .timeline <span class="op">=</span> <span class="va">timeline</span>,</span></span>
<span class="r-in"><span>               .state <span class="op">=</span> <span class="st">"StateXY"</span>,</span></span>
<span class="r-in"><span>               .n_path <span class="op">=</span> <span class="fl">2L</span>, .one_page <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Compare different movement models via `sim_path_walk()`</span></span></span>
<span class="r-in"><span>  <span class="va">pp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">args</span><span class="op">$</span><span class="va">.model_move</span> <span class="op">&lt;-</span> <span class="fu">model_move_xy</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">sim_path_walk</span>, <span class="va">args</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">args</span><span class="op">$</span><span class="va">.model_move</span> <span class="op">&lt;-</span> <span class="fu">model_move_xy</span><span class="op">(</span>.dbn_heading <span class="op">=</span> <span class="st">"VonMises(0.1, 0.1)"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">sim_path_walk</span>, <span class="va">args</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">pp</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Example (6): Use movement models in the particle filter</span></span></span>
<span class="r-in"><span>  <span class="co"># See `?pf_filter()`</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#### Example (7): Use custom movement model types</span></span></span>
<span class="r-in"><span>  <span class="co"># Patter contains multiple built-in `State` and `ModelMove` sub-types that you can use</span></span></span>
<span class="r-in"><span>  <span class="co"># ... (with custom parameters) simulate movements and for particle filtering.</span></span></span>
<span class="r-in"><span>  <span class="co"># See the help file for `?State` to use a new sub-type.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::julia_connect()` called @ 2025-03-13 20:41:41... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Running `Julia` setup via `JuliaCall::julia_setup()`... </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Julia version 1.11.3 at location /Users/lavended/.julia/juliaup/julia-1.11.3+0.aarch64.apple.darwin14/bin will be used.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading setup script for JuliaCall...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Finish loading setup script for JuliaCall.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Validating Julia installation... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Setting up Julia project... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Handling dependencies... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... `Julia` set up with 11 thread(s). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `patter::julia_connect()` call ended @ 2025-03-13 20:41:56 (duration: ~15 sec(s)). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ```</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exponential(θ)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ```</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The *Exponential distribution* with scale parameter `θ` has probability density function</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $$</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> f(x; \theta) = \frac{1}{\theta} e^{-\frac{x}{\theta}}, \quad x &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $$</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ```julia</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exponential()      # Exponential distribution with unit scale, i.e. Exponential(1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exponential(θ)     # Exponential distribution with scale θ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> params(d)          # Get the parameters, i.e. (θ,)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> scale(d)           # Get the scale parameter, i.e. θ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rate(d)            # Get the rate parameter, i.e. 1 / θ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ```</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> External links</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   * [Exponential distribution on Wikipedia](http://en.wikipedia.org/wiki/Exponential_distribution)</span>
<span class="r-plt img"><img src="ModelMove-1.png" alt="" width="700" height="433"></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Use `seq.POSIXt()` with `from`, `to` and `by` rather than `length.out` for faster handling of time stamps.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Use `seq.POSIXt()` with `from`, `to` and `by` rather than `length.out` for faster handling of time stamps.</span>
<span class="r-plt img"><img src="ModelMove-2.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Edward Lavender.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

